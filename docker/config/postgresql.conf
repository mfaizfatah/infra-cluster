# PostgreSQL configuration optimized for 1GB RAM VPS
# Conservative settings for low-memory environment

# Memory settings (optimized for 1GB total RAM)
shared_buffers = 32MB              # ~3% of total RAM
effective_cache_size = 256MB       # ~25% of total RAM
maintenance_work_mem = 16MB        # Conservative for maintenance
work_mem = 4MB                     # Low to prevent OOM

# Connection settings (reduced for memory efficiency)
max_connections = 20               # Lower connections = less memory
listen_addresses = '*'
port = 5432

# Logging (minimal for memory efficiency)
log_statement = 'none'             # Disable statement logging
log_min_duration_statement = 5000  # Only log slow queries (5s+)
log_line_prefix = '%t [%p]: '      # Minimal log prefix

# Checkpoints (optimized for low memory)
checkpoint_completion_target = 0.9
wal_buffers = 8MB                  # Reduced WAL buffers

# Performance (optimized for SSD/low memory)
random_page_cost = 1.1
effective_io_concurrency = 1      # Conservative for VPS

# Additional memory optimizations
temp_buffers = 8MB                 # Reduced temp buffers
max_prepared_transactions = 0      # Disable if not needed
autovacuum_work_mem = 16MB         # Reduced autovacuum memory

# Development settings (optional - disable for production)
# fsync = off                      # Uncomment only for development
# synchronous_commit = off         # Uncomment only for development
